\usepackage{minted}
\usepackage{tikz}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{xcolor}

%%% Test environment

\newenvironment{explanation}
{\begin{mdframed}[nobreak=true, roundcorner=10pt]}
{\end{mdframed}}

%%% Code environments

\newenvironment{code}[3]
% The basic code environment.
% Used to create further environments.
%
% Take three arguments:
% - a string of text to appear and a language for syntax
% - a string of text to appear and a language for syntax
% - the width of the border frame
%
% For example:
%
% \begin{code}{Python input}{python}{0.4pt}
% for i in range(5):
%   print(i)
% end{code}
{\begin{tiny}
        \begin{center}
            \framebox{\texttt{#1}}
         \end{center}
 \end{tiny}
 \VerbatimEnvironment
 \begin{minted}[
    linenos=true,
    style=friendly,
    samepage=true,
    frame=single,
    framerule=#3,
    bgcolor=white,
    firstnumber=last,
    ]{#2}}
{\end{minted}}

%%%%% Python code environments

\surroundwithmdframed[backgroundcolor=cyan!5, nobreak=true]{pyin}
\surroundwithmdframed[backgroundcolor=yellow!5, nobreak=true]{pyout}

\newenvironment{pyin}
% Python input environment
% \begin{pyin}
% for i in range(5):
%   print(i)
% end{pyin}
{
\VerbatimEnvironment
\begin{code}{Python input}{python}{0.8pt}}
{\end{code}}

\newenvironment{pyout}
% Python ouput environment
% \begin{pyout}
% 0
% 1
% 2
% 3
% 4
% end{pyout}
{
\VerbatimEnvironment
\begin{code}{Python output}{python}{0.4pt}}
{\end{code}}

%%%%% R code environments
\surroundwithmdframed[backgroundcolor=magenta!5, nobreak=true]{Rin}
\surroundwithmdframed[backgroundcolor=green!5, nobreak=true]{Rout}


\newenvironment{Rin}
% R input environment
% for (i in seq(0, 4)) {
%   print(i)
% }
% end{pyin}
{
\VerbatimEnvironment
\begin{code}{R input}{R}{0.8pt}}
{\end{code}}


\newenvironment{Rout}
% R output environment
% \begin{Rout}
% 0
% 1
% 2
% 3
% 4
% end{Rout}
{
\VerbatimEnvironment
\begin{code}{R output}{R}{0.4pt}}
{\end{code}}


%%%%% Cli code environments
\surroundwithmdframed[nobreak=true]{cliin}
\surroundwithmdframed[nobreak=true]{cliout}

\newenvironment{cliin}
{
\VerbatimEnvironment
\begin{code}{Cli input}{bash}{0.8pt}}
{\end{code}}


\newenvironment{cliout}
{
\VerbatimEnvironment
\begin{code}{Cli output}{bash}{0.4pt}}
{\end{code}}

